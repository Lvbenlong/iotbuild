(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d6d4f06"],{5568:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iotTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},t._l(t.tableHeader,function(e,n){return"slot"!==e.type?a("el-table-column",{key:n,attrs:{prop:e.prop,width:e.width,label:e.label}}):a("el-table-column",{key:n,attrs:{width:e.width||150,label:e.label},scopedSlots:t._u([{key:"default",fn:function(a){return[t._t("col-"+e.prop,null,{row:a.row,index:a.$index})]}}],null,!0)})}),1),t.showPage?a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.pagination.page,"page-sizes":[10,20,50,100],"page-size":t.pagination.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)},r=[],i={name:"IotTable",props:{tableData:{type:Array,required:!0},tableHeader:{type:Array,required:!0},loading:{type:Boolean,required:!1},pagination:{type:Object,required:!1},hidepagination:{type:Boolean,required:!1,default:!1}},data:function(){return{}},computed:{showPage:function(){return!this.hidepagination&&!!this.pagination}},methods:{handleSizeChange:function(t){this.pagination.per_page=t,this.$emit("reloaddata")},handleCurrentChange:function(t){console.log(t),this.pagination.page=t,this.$emit("reloaddata")}}},o=i,c=(a("c18f"),a("2877")),l=Object(c["a"])(o,n,r,!1,null,"d6bd296c",null);e["a"]=l.exports},"84c0":function(t,e,a){},8593:function(t,e,a){"use strict";a.d(e,"f",function(){return o}),a.d(e,"d",function(){return c}),a.d(e,"b",function(){return l}),a.d(e,"e",function(){return s}),a.d(e,"c",function(){return u}),a.d(e,"g",function(){return d}),a.d(e,"a",function(){return p}),a.d(e,"h",function(){return f});var n=a("8897"),r=a("751a"),i=a("72bb");function o(t){return r["a"].get("".concat(n["a"].baseUrl,"/v2/companies"),t)}function c(){return r["a"].get("".concat(n["a"].baseUrl,"/v2/roles"))}function l(t){return r["a"].del("".concat(n["a"].baseUrl,"/v2/role/").concat(t))}function s(t){return r["a"].get("".concat(n["a"].baseUrl,"/v2/members?page=").concat(t.page||1,"&per_page=").concat(t.per_page||10),t)}function u(t,e){return r["a"].del("".concat(n["a"].baseUrl,"/v3/member?mid=")+t+"&verify_code="+e)}function d(t){return r["a"].get("".concat(n["a"].baseUrl,"/v2/operations"),t)}function p(t){return r["a"].post("".concat(n["a"].baseUrl,"/v2/company/logo/custom"),t)}function f(t){return r["a"].post("".concat(n["a"].baseUrl,"/v2/imei/mac/excel"),t,{headers:{"X-API-TOKEN":Object(i["a"])(n["a"].token)}})}},"9f84":function(t,e,a){},bcae:function(t,e,a){},c18f:function(t,e,a){"use strict";var n=a("9f84"),r=a.n(n);r.a},dab0:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"titleHeader"},[a("h3",[t._v(t._s(t.title))])])},r=[],i={name:"TitleHeader",props:["title"],data:function(){return{}}},o=i,c=(a("e4fc"),a("2877")),l=Object(c["a"])(o,n,r,!1,null,"2b873fd4",null);e["a"]=l.exports},dd2d:function(t,e,a){"use strict";var n=a("bcae"),r=a.n(n);r.a},e4fc:function(t,e,a){"use strict";var n=a("84c0"),r=a.n(n);r.a},f982:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"role"},[a("title-header",{attrs:{title:"角色定义"}}),a("div",{staticClass:"table-data"},[a("iot-table",{attrs:{tableHeader:t.tableHeader,tableData:t.tableData,pagination:t.pagination,loading:t.loading},on:{reloaddata:t.initData},scopedSlots:t._u([{key:"col-type",fn:function(e){return a("div",{},[a("p",[t._v(t._s("HQ"===e.row.type?"总代":"代理商"))])])}},{key:"col-province",fn:function(e){return a("div",{},[a("p",[t._v(t._s(e.row.province||"")+t._s(e.row.city||"")+t._s(e.row.county||"")+t._s(e.row.village||""))])])}},{key:"col-confirm",fn:function(e){return a("div",{},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row.code)}}},[a("span",{staticClass:"iconfont iconshanchu"})])],1)}}])})],1)],1)},r=[],i=(a("7f7f"),a("96cf"),a("3b8d")),o=a("dab0"),c=a("5568"),l=a("8593"),s=a("3389"),u=a("24b9"),d={name:"Role",components:{TitleHeader:o["a"],iotTable:c["a"]},data:function(){return{loading:!1,pagination:{page:1,per_page:10,total:0},tableData:[],tableHeader:[{prop:"name",label:"角色名称"},{prop:"desc",label:"描述"},{prop:"createTime",label:"创建时间"},{prop:"confirm",label:"操作",type:"slot"}]}},mounted:function(){this.initData()},methods:{handleDelete:function(t){var e=this;s["a"].confirm("确定要删除？","删除后将无法恢复!",function(){Object(l["b"])(t).then(function(t){200===t.status?(s["a"].info("删除成功"),e.listData()):s["a"].error("删除失败",t.msg)},function(t){s["a"].error("删除失败",s["a"].findErrorMsg(t))})})},initData:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,Object(l["d"])();case 4:e=t.sent,a=e.data,this.tableData=a.map(function(t){return{name:t.name,code:t.code,desc:t.desc,createTime:u["a"].format(new Date(1e3*t.create_time),"YYYY-MM-dd HH:mm:ss"),updateTime:t.update_time}}),this.pagination.total=a.length||0,this.loading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),this.loading=!1,s["a"].error("查询角色列表失败",s["a"].findErrorMsg(t.t0));case 15:case"end":return t.stop()}},t,this,[[1,11]])}));function e(){return t.apply(this,arguments)}return e}(),handleSearch:function(){""!==this.queryFilter.name||""!==this.queryFilter.code||""!==this.queryFilter.type?this.initData():s["a"].error("查询条件不能为空")}}},p=d,f=(a("dd2d"),a("2877")),g=Object(f["a"])(p,n,r,!1,null,"38c93c64",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-7d6d4f06.2b53cfc7.js.map