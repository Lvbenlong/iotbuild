(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d288922e"],{"04b3":function(t,e,a){t.exports=a.p+"img/close.ab0461dc.png"},"0a49":function(t,e,a){var n=a("9b43"),r=a("626a"),i=a("4bf8"),s=a("9def"),u=a("cd1c");t.exports=function(t,e){var a=1==t,o=2==t,l=3==t,c=4==t,d=6==t,f=5==t||d,p=e||u;return function(e,u,v){for(var h,g,b=i(e),m=r(b),y=n(u,v,3),_=s(m.length),w=0,x=a?p(e,_):o?p(e,0):void 0;_>w;w++)if((f||w in m)&&(h=m[w],g=y(h,w,b),t))if(a)x[w]=g;else if(g)switch(t){case 3:return!0;case 5:return h;case 6:return w;case 2:x.push(h)}else if(c)return!1;return d?-1:l||c?c:x}}},1169:function(t,e,a){var n=a("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"2a12":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"maxLength",max:t},function(e){return!(0,n.req)(e)||(0,n.len)(e)<=t})}},"2bfc":function(t,e,a){"use strict";var n=a("5cd5"),r=a.n(n);r.a},3360:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,n.withParams)({type:"and"},function(){for(var t=this,a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return e.length>0&&e.reduce(function(e,a){return e&&a.apply(t,n)},!0)})}},"3a54":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=(0,n.regex)("alphaNum",/^[a-zA-Z0-9]*$/)},"3f13":function(t,e,a){},"45b8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=(0,n.regex)("numeric",/^[0-9]*$/)},"46bc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"maxValue",max:t},function(e){return!(0,n.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e<=+t})}},"47b9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gateway"},[a("p",{staticClass:"tab"},[a("span",{class:{active:0===t.pageState},on:{click:function(e){t.pageState=0}}},[t._v("\n      网关\n    ")]),a("span",{class:{active:1===t.pageState},on:{click:function(e){t.pageState=1}}},[t._v("\n      升级列表\n    ")])]),a("div",{staticClass:"tab-con"},[0===t.pageState?a("gateway-list"):a("upgrade-list")],1)])},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gateway condition2"},[a("div",{staticClass:"search-box"},[a("ul",[a("li",[a("p",{staticClass:"input-title"},[t._v("IMEI")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryFilter.imei,expression:"queryFilter.imei"}],attrs:{type:"text",placeholder:"请输入IMEI"},domProps:{value:t.queryFilter.imei},on:{input:function(e){e.target.composing||t.$set(t.queryFilter,"imei",e.target.value)}}})]),a("li",[a("p",{staticClass:"input-title"},[t._v("设备状态")]),a("div",{staticClass:"dropmenu"},[a("input",{attrs:{type:"text",readonly:"readonly",placeholder:"请选择"}}),a("div",{staticClass:"dropdown"},[a("ul",[a("li",{on:{click:function(e){t.queryFilter.status=-1}}},[t._v("全部状态")]),a("li",{on:{click:function(e){t.queryFilter.status=1}}},[t._v("在线")]),a("li",{on:{click:function(e){t.queryFilter.status=0}}},[t._v("离线")])])])])]),a("li",{staticClass:"search-btn"},[a("button",{staticClass:"btn btn-middle btn-green",on:{click:t.initData}},[t._v("查询")])])])]),a("div",{staticClass:"data"},[a("iot-table",{attrs:{tableHeader:t.tableHeader,tableData:t.tableData,pagination:t.pagination,loading:t.loading},on:{reloaddata:t.initData},scopedSlots:t._u([{key:"col-is_working",fn:function(e){return a("div",{},[a("p",[t._v(t._s(0===e.row.is_working?"离线":"在线"))])])}}])})],1)])},s=[],u=(a("96cf"),a("3b8d")),o=(a("7514"),a("1157")),l=a.n(o),c=a("9f2d"),d=a("5568"),f={name:"Gateway",components:{iotTable:d["a"]},mounted:function(){l()(".dropmenu").click(function(){l()(this).children(".dropdown").slideToggle()}),l()(".dropdown li").click(function(){var t=l()(this).text();l()(this).closest(".dropmenu").find("input").val(t)}),this.initData()},data:function(){return{loading:!1,queryFilter:{imei:"",status:"-1"},tableData:[],pagination:{page:1,per_page:10,total:0},tableHeader:[{prop:"imei",label:"imei"},{prop:"version",label:"版本号"},{prop:"connection_num",label:"连接次数"},{prop:"is_working",label:"当前状态",type:"slot"},{prop:"address",label:"街道"}]}},methods:{initData:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={page:this.pagination.page,per_page:this.pagination.per_page,imei:this.queryFilter.imei?this.queryFilter.imei:void 0,is_working:this.queryFilter.status>=0?this.queryFilter.status:void 0},t.next=4,Object(c["a"])(e);case 4:a=t.sent,n=a.data,this.tableData=n.items,this.loading=!1;case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},p=f,v=(a("95d3"),a("2877")),h=Object(v["a"])(p,i,s,!1,null,"5dcff0e4",null),g=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upgrade"},[a("div",{staticClass:"data"},[a("iot-table",{attrs:{tableHeader:t.tableHeader,tableData:t.tableData,pagination:t.pagination,loading:t.loading},on:{reloadData:t.initData},scopedSlots:t._u([{key:"col-middle",fn:function(e){return a("div",{},[a("button",{staticClass:"btn btn-middle",on:{click:function(a){return t.upgrade_station(e.index)}}},[t._v("启动OTA")])])}}])})],1),a("start-ota",{ref:"startOta"})],1)},m=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showStatus,expression:"showStatus"}],staticClass:"popup popup1 task-popup",attrs:{id:"startOta"}},[n("p",{staticClass:"popup-title"},[t._v("\n    基站OTA\n  ")]),n("div",{staticClass:"popup-con"},[n("ul",[n("li",[n("span",[t._v("基站IMEI标识")]),n("p",[t._v(t._s(t.station.imei))])]),n("li",[n("span",[t._v("基站固件版本")]),n("p",[t._v(t._s(t.station.version))])]),n("li",[n("span",[t._v("基站安装位置")]),n("p",[t._v(t._s(t.station.address))])]),n("li",[n("span",[t._v("升级密钥(4位数字)")]),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.station.password,expression:"station.password"}],attrs:{type:"text"},domProps:{value:t.station.password},on:{input:function(e){e.target.composing||t.$set(t.station,"password",e.target.value)}}})])]),n("li",[n("button",{staticClass:"btn btn-middle cancel",on:{click:t.cancel}},[t._v("取消")]),n("button",{staticClass:"btn btn-middle yes",on:{click:t.submit}},[t._v("确定")])])])]),n("span",{staticClass:"layui-layer-setwin"},[n("a",{staticClass:"close-popup layui-layer-close layui-layer-close1",attrs:{href:"javascript:;"},on:{click:t.cancel}},[n("img",{attrs:{src:a("04b3"),title:"关闭"}})])])])},_=[],w=(a("b5ae"),a("78ef"),a("3389")),x={data:function(){return{showStatus:!1,station:{imei:"",address:0,version:"",password:""}}},methods:{show:function(t){this.station={imei:t.imei,address:t.address,version:t.version},this.showStatus=!0},submit:function(){var t=this;Object(c["d"])(this.station.imei,{password:this.station.password}).then(function(e){t.showStatus=!1,w["a"].success("向在线基站下发OTA指令成功")},function(t){w["a"].error("向基站下发OTA指令失败",w["a"].findErrorMsg(t))})},cancel:function(){this.showStatus=!1}}},O=x,P=(a("6728"),Object(v["a"])(O,y,_,!1,null,null,null)),j=P.exports,q={name:"Upgrade",components:{startOta:j,iotTable:d["a"]},mounted:function(){this.initData()},data:function(){return{loading:!0,tableData:[],pagination:{page:1,per_page:10,total:0},tableHeader:[{prop:"address",label:"地址"},{prop:"imei",label:"imei"},{prop:"version",label:"版本号"},{prop:"middle",label:"升级进度",type:"slot"}]}},methods:{initData:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(c["e"])("0.2");case 3:e=t.sent,a=e.data,this.tableData=a.items,this.loading=!1;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),upgrade_station:function(t){this.$refs.startOta.show(this.tableData[t])}}},A=q,C=(a("2bfc"),Object(v["a"])(A,b,m,!1,null,null,null)),k=C.exports,M={name:"Gateway",components:{GatewayList:g,UpgradeList:k},data:function(){return{pageState:0}}},D=M,S=(a("ba8b"),Object(v["a"])(D,n,r,!1,null,"17df75e8",null));e["default"]=S.exports},5568:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iotTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},t._l(t.tableHeader,function(e,n){return"slot"!==e.type?a("el-table-column",{key:n,attrs:{prop:e.prop,width:e.width,label:e.label}}):a("el-table-column",{key:n,attrs:{width:e.width||150,label:e.label},scopedSlots:t._u([{key:"default",fn:function(a){return[t._t("col-"+e.prop,null,{row:a.row,index:a.$index})]}}],null,!0)})}),1),t.hidepagination?t._e():a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.pagination.page,"page-sizes":[10,20,50,100],"page-size":t.pagination.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},r=[],i={name:"IotTable",props:{tableData:{type:Array,required:!0},tableHeader:{type:Array,required:!0},loading:{type:Boolean},pagination:{type:Object,required:!0},hidepagination:{type:Boolean,default:!1}},data:function(){return{}},methods:{handleSizeChange:function(t){this.pagination.per_page=t,this.$emit("reloaddata")},handleCurrentChange:function(t){this.pagination.page=t,this.$emit("reloaddata")}}},s=i,u=(a("cdff"),a("2877")),o=Object(u["a"])(s,n,r,!1,null,"7ea0e430",null);e["a"]=o.exports},"58f1":function(t,e,a){},"5cd5":function(t,e,a){},"5d75":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef"),r=/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/;e.default=(0,n.regex)("email",r)},"5db3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"minLength",min:t},function(e){return!(0,n.req)(e)||(0,n.len)(e)>=t})}},"60ca":function(t,e,a){},6235:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=(0,n.regex)("alpha",/^[a-zA-Z]*$/)},6728:function(t,e,a){"use strict";var n=a("3f13"),r=a.n(n);r.a},7514:function(t,e,a){"use strict";var n=a("5ca1"),r=a("0a49")(5),i="find",s=!0;i in[]&&Array(1)[i](function(){s=!1}),n(n.P+n.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},"772d":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef"),r=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/;e.default=(0,n.regex)("url",r)},"78ef":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.regex=e.ref=e.len=e.req=e.withParams=void 0;var n=a("8750"),r=i(n);function i(t){return t&&t.__esModule?t:{default:t}}e.withParams=r.default;var s=e.req=function(t){if(Array.isArray(t))return!!t.length;if(void 0===t||null===t||!1===t)return!1;if(t instanceof Date)return!isNaN(t.getTime());if("object"===typeof t){for(var e in t)return!0;return!1}return!!String(t).length};e.len=function(t){return Array.isArray(t)?t.length:"object"===typeof t?Object.keys(t).length:String(t).length},e.ref=function(t,e,a){return"function"===typeof t?t.call(e,a):a[t]},e.regex=function(t,e){return(0,r.default)({type:t},function(t){return!s(t)||e.test(t)})}},8750:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("0234").withParams;e.default=n},"8e72":function(t,e,a){},"91d3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,n.withParams)({type:"macAddress"},function(e){if(!(0,n.req)(e))return!0;if("string"!==typeof e)return!1;var a="string"===typeof t&&""!==t?e.split(t):12===e.length||16===e.length?e.match(/.{2}/g):null;return null!==a&&(6===a.length||8===a.length)&&a.every(r)})};var r=function(t){return t.toLowerCase().match(/^[0-9a-f]{2}$/)}},"95d3":function(t,e,a){"use strict";var n=a("58f1"),r=a.n(n);r.a},"9f2d":function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"a",function(){return s}),a.d(e,"e",function(){return u}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return l});var n=a("8897"),r=a("751a");function i(t,e,a){var i="key=".concat(t).concat(e?"&start=".concat(e):"").concat(a?"&end=".concat(a):"");return r["a"].get("".concat(n["a"].baseUrl,"/v2/stats/common?").concat(i))}function s(t){return r["a"].get("".concat(n["a"].baseUrl,"/v2/stations"),t)}function u(t){return r["a"].get("".concat(n["a"].baseUrl,"/v2/stations/version/").concat(t))}function o(t,e){return r["a"].get("".concat(n["a"].baseUrl,"/v2/station/").concat(t,"/upgrade"),e)}function l(){return r["a"].get("".concat(n["a"].baseUrl,"/v2/stats/projects/dist"))}},aa82:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"requiredIf",prop:t},function(e,a){return!(0,n.ref)(t,this,a)||(0,n.req)(e)})}},b5ae:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.maxValue=e.minValue=e.and=e.or=e.url=e.sameAs=e.requiredUnless=e.requiredIf=e.required=e.minLength=e.maxLength=e.macAddress=e.ipAddress=e.email=e.between=e.numeric=e.alphaNum=e.alpha=void 0;var n=a("6235"),r=E(n),i=a("3a54"),s=E(i),u=a("45b8"),o=E(u),l=a("ec11"),c=E(l),d=a("5d75"),f=E(d),p=a("c99d"),v=E(p),h=a("91d3"),g=E(h),b=a("2a12"),m=E(b),y=a("5db3"),_=E(y),w=a("d4f4"),x=E(w),O=a("aa82"),P=E(O),j=a("e652"),q=E(j),A=a("b6cb"),C=E(A),k=a("772d"),M=E(k),D=a("d294"),S=E(D),$=a("3360"),z=E($),F=a("eb66"),I=E(F),T=a("46bc"),U=E(T);function E(t){return t&&t.__esModule?t:{default:t}}e.alpha=r.default,e.alphaNum=s.default,e.numeric=o.default,e.between=c.default,e.email=f.default,e.ipAddress=v.default,e.macAddress=g.default,e.maxLength=m.default,e.minLength=_.default,e.required=x.default,e.requiredIf=P.default,e.requiredUnless=q.default,e.sameAs=C.default,e.url=M.default,e.or=S.default,e.and=z.default,e.minValue=I.default,e.maxValue=U.default},b6cb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"sameAs",eq:t},function(e,a){return e===(0,n.ref)(t,this,a)})}},ba8b:function(t,e,a){"use strict";var n=a("8e72"),r=a.n(n);r.a},c99d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=(0,n.withParams)({type:"ipAddress"},function(t){if(!(0,n.req)(t))return!0;if("string"!==typeof t)return!1;var e=t.split(".");return 4===e.length&&e.every(r)});var r=function(t){if(t.length>3||0===t.length)return!1;if("0"===t[0]&&"0"!==t)return!1;if(!t.match(/^\d+$/))return!1;var e=0|+t;return e>=0&&e<=255}},cd1c:function(t,e,a){var n=a("e853");t.exports=function(t,e){return new(n(t))(e)}},cdff:function(t,e,a){"use strict";var n=a("60ca"),r=a.n(n);r.a},d294:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,n.withParams)({type:"or"},function(){for(var t=this,a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return e.length>0&&e.reduce(function(e,a){return e||a.apply(t,n)},!1)})}},d4f4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=(0,n.withParams)({type:"required"},n.req)},e652:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"requiredUnless",prop:t},function(e,a){return!!(0,n.ref)(t,this,a)||(0,n.req)(e)})}},e853:function(t,e,a){var n=a("d3f4"),r=a("1169"),i=a("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},eb66:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t){return(0,n.withParams)({type:"minValue",min:t},function(e){return!(0,n.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e>=+t})}},ec11:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("78ef");e.default=function(t,e){return(0,n.withParams)({type:"between",min:t,max:e},function(a){return!(0,n.req)(a)||(!/\s/.test(a)||a instanceof Date)&&+t<=+a&&+e>=+a})}}}]);
//# sourceMappingURL=chunk-d288922e.0b089cec.js.map