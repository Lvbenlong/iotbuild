(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21592ac6"],{"2ad4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report"},[a("title-header",{attrs:{title:"安装趋势/九九物联"}}),a("div",{staticClass:"tools"},[a("el-button",{staticClass:"green",attrs:{type:"primary"},on:{click:e.getreporttypelistall}},[e._v("查询")])],1),a("div",{staticClass:"filter"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("p",{staticClass:"name"},[e._v("开始时间")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择"},model:{value:e.queryFilter.start,callback:function(t){e.$set(e.queryFilter,"start",t)},expression:"queryFilter.start"}})],1),a("el-col",{attrs:{span:8}},[a("p",{staticClass:"name"},[e._v("结束时间")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择"},model:{value:e.queryFilter.end,callback:function(t){e.$set(e.queryFilter,"end",t)},expression:"queryFilter.end"}})],1)],1),a("br"),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("p",{staticClass:"name"},[e._v("省级代理商")]),a("el-select",{attrs:{placeholder:"请选择省级代理"},model:{value:e.provinceagent,callback:function(t){e.provinceagent=t},expression:"provinceagent"}},e._l(e.provinceagentlist,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e}})}),1)],1),a("el-col",{attrs:{span:8}},[a("p",{staticClass:"name"},[e._v("市级代理商")]),a("el-select",{attrs:{placeholder:"市级代理商"},model:{value:e.cityagent,callback:function(t){e.cityagent=t},expression:"cityagent"}},e._l(e.cityagentlist,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e}})}),1)],1),a("el-col",{attrs:{span:8}},[a("p",{staticClass:"name"},[e._v("区/县级代理商")]),a("el-select",{attrs:{placeholder:"请选择区/县级代理"},model:{value:e.countyagent,callback:function(t){e.countyagent=t},expression:"countyagent"}},e._l(e.countyagentlist,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e}})}),1)],1)],1),a("br"),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("p",{staticClass:"name"},[e._v("汇总项目")]),a("el-select",{attrs:{placeholder:"请选择省级代理"},model:{value:e.projectchoseall,callback:function(t){e.projectchoseall=t},expression:"projectchoseall"}},e._l(e.allSupervisors,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e}})}),1)],1)],1),a("br"),a("div",{staticClass:"device-list"},[a("p",{staticClass:"name"},[e._v("汇总设备")]),a("div",{staticClass:"lists"},[a("div",{staticClass:"select common-item",on:{click:e.choseequipment}},[e._v("选择设备")]),e._l(e.equipmentlistz,function(t,i){return t.checked?a("div",{key:i,staticClass:"list-item common-item"},[e._v("\n          "+e._s(t.name)+"\n          "),a("span",{on:{click:function(a){return e.deleteChecked(t)}}},[a("i",{staticClass:"iconfont iconguanbi"})])]):e._e()})],2)])],1),e._m(0),e._m(1),e._m(2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showequipment,expression:"showequipment"}],staticClass:"popups"},[a("div",{staticClass:"equipmentpanel"},[a("h3",{staticClass:"equipmentpaneltitle"},[e._v("\n        总汇设备\n        "),a("span",{staticClass:"iconfont iconguanbi closeshowequipment",on:{click:e.allcancel}})]),a("div",{staticClass:"content"},[a("h3",{staticClass:"equipmentpanelcontent"},[e._v("\n          请勾选需要的设备：\n        ")]),a("ul",{staticClass:"contentcheck"},e._l(e.equipmentlistz,function(t,i){return a("li",{key:i,on:{click:function(a){return e.changecheck(t)}}},[a("label",[a("div",{class:{ischecked:t.checked}}),e._v(e._s(t.name)+"\n            ")])])}),0),a("ul",{staticClass:"contentcheck"},[a("li",{on:{click:e.allchangechecked}},[a("label",[a("div",{class:{ischecked:this.allchecked}}),e._v("全部选择\n            ")])]),a("li",{on:{click:e.dischangechecked}},[a("label",[a("div",{class:{ischecked:this.dischecked}}),e._v("全部取消\n            ")])])]),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-middle",on:{click:e.allcancel}},[e._v("\n            取消\n          ")]),a("button",{staticClass:"btn btn-middle btn-green",on:{click:e.choseequipment}},[e._v("\n            确认\n          ")])])])])]),a("loading",{directives:[{name:"show",rawName:"v-show",value:e.showLoadingDiolod,expression:"showLoadingDiolod"}]})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-box"},[a("div",{staticStyle:{width:"95%",height:"400px"},attrs:{id:"daily"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-box"},[a("div",{staticStyle:{width:"95%",height:"400px"},attrs:{id:"devideStatus"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-box"},[a("div",{staticStyle:{width:"95%",height:"400px"},attrs:{id:"installInfo"}})])}],c=(a("96cf"),a("3b8d")),s=(a("7f7f"),a("ac6a"),a("5df3"),a("dab0")),l=a("b3aa"),r=a("72bb"),o=a("8897"),d=a("c428"),h=a("3389"),u={name:"Trend",components:{TitleHeader:s["a"],Loading:d["a"]},mounted:function(){var e=this;this.companyName=Object(r["a"])(o["a"].companyTureName),this.level=Object(r["a"])(o["a"].level),this.cid=Object(r["a"])(o["a"].companyId),this.drawDaily(),this.drawDevideStatus(),this.drawInstallInfo(),Promise.all([this.getagentlist(Object(r["a"])(o["a"].companyId)),this.getplaceslist(Object(r["a"])(o["a"].code)),this.getreporttypelist(Object(r["a"])(o["a"].companyId),this.pids)]).then(function(){e.showLoadingDiolod=!1}).catch(function(t){e.showLoadingDiolod=!1,h["a"].error("查询数据失败",h["a"].findErrorMsg(t))})},data:function(){return{showLoadingDiolod:!1,allchecked:!1,dischecked:!1,showequipment:!1,queryFilter:{project:void 0,cycle:void 0,summarymode:{code:"2",display:"按设备"},start:new Date(Date.now()-6048e5),end:new Date},device_type:"",provinceagentlist:[],cityagentlist:[],countyagentlist:[],equipmentlistz:[],projectchoseall:"",provinceagent:"",cityagent:"",countyagent:"",placeslist:"",level:"",cid:"",summarymode:[{code:"1",display:"按项目"},{code:"2",display:"按设备"}],equipmentlist:[{code:"1",checked:!0,name:"定位终端"},{code:"2",checked:!0,name:"智能烟感"},{code:"3",checked:!0,name:"红外"},{code:"5",checked:!0,name:"气体报警"},{code:"6",checked:!0,name:"一氧化碳"},{code:"7",checked:!0,name:"一键报警"},{code:"11",checked:!0,name:"智能用电终端"},{code:"12",checked:!0,name:"电器线路"},{code:"13",checked:!0,name:"古玩字画"},{code:"14",checked:!0,name:"WISE主机"},{code:"15",checked:!0,name:"智能温感"},{code:"17",checked:!0,name:"液化石油气报警终端"},{code:"21",checked:!0,name:"用电安全"},{code:"22",checked:!0,name:"消防栓"},{code:"23",checked:!0,name:"水位仪"},{code:"24",checked:!0,name:"消防主机联网"},{code:"26",checked:!0,name:"巡更助手"},{code:"27",checked:!0,name:"消防栓压力监控"},{code:"28",checked:!0,name:"液位监控"},{code:"30",checked:!0,name:"电气火灾监控器"},{code:"91",checked:!0,name:"视频监控"},{code:"92",checked:!0,name:"灭火器"},{code:"178",checked:!0,name:"NB烟感"},{code:"181",checked:!0,name:"NB燃气"},{code:"229",checked:!0,name:"工业燃气"},{code:"31",checked:!0,name:"控制柜监测"},{code:"183",checked:!0,name:"NB一键报警"}],allecharts:[],allecharts1:[{device_number_today:""},{device_number_week:""},{device_number_mouth:""}],allecharts2:[{device_number_today_all:""},{device_number_week_all:""},{device_number_mouth_all:""}],allecharts3:[],allecharts4:[],types_summary:[]}},computed:{allSupervisors:function(){return this.placeslist?this.placeslist.map(function(e){return{name:e.name,id:e.id,flag:!1}}):{}}},methods:{generate:function(){var e=this;this.queryFilter.start&&this.queryFilter.end&&this.cid?this.device_type?Object(l["e"])({start:Math.ceil(this.queryFilter.start.getTime()/1e3),end:Math.ceil(this.queryFilter.end.getTime()/1e3),cid:this.cid,pid:this.pid,device_type:this.device_type.substring(0,this.device_type.lastIndexOf(","))}).then(function(t){200==t.status&&(e.allecharts=t.data,e.allecharts1=t.data[0],e.allecharts2=t.data[1],e.allecharts3=t.data[2],e.allecharts4=t.data[3],200==t.status&&Object(l["b"])({start:Math.ceil(e.queryFilter.start.getTime()/1e3),end:Math.ceil(e.queryFilter.end.getTime()/1e3),cid:e.cid,pids:e.pids,device_type:e.device_type.substring(0,e.device_type.lastIndexOf(","))}).then(function(t){200==t.status&&(e.types_summary=t.data.summary_list)}).catch(function(e){h["a"].error("请求失败，请联系管理员")}))}).catch(function(e){h["a"].error("请求失败，请联系管理员")}):h["a"].error("无安装记录"):h["a"].error("请填写报表参数")},drawDaily:function(){var e=this.$echarts.init(document.getElementById("daily")),t={title:{text:"安装日报",subtext:"新增/台",textStyle:{color:"#f2f2f2",fontStyle:"",fontSize:16}},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",name:"日期",boundaryGap:!1,data:[1,2,3],axisLabel:{show:!0,textStyle:{color:"#f2f2f2",fontSize:"12"}},axisLine:{show:!0,lineStyle:{color:"#3C525C",width:1}},splitLine:{show:!1,lineStyle:{color:["red"]}}},yAxis:{name:"数量",type:"value",axisLabel:{show:!0,textStyle:{color:"#f2f2f2",fontSize:"12"}},axisLine:{show:!0,lineStyle:{color:"#3C525C",width:1}},splitLine:{show:!1,lineStyle:{color:["red"]}}},series:[{name:"安装数量",type:"line",data:[5,6,7],lineStyle:{normal:{color:"#fbec40",width:2}},itemStyle:{normal:{borderWidth:3,borderColor:"yellow",color:"yellow"}}}]};e.setOption(t)},drawDevideStatus:function(){var e=this.$echarts.init(document.getElementById("devideStatus")),t={title:{text:"设备安装状态",subtext:"新增/台",textStyle:{color:"#f2f2f2",fontStyle:"",fontSize:16}},tooltip:{trigger:"axis"},xAxis:{type:"category",name:"设备",data:[1,2,3],axisLabel:{show:!0,textStyle:{color:"#f2f2f2",fontSize:"12"}},axisLine:{show:!0,lineStyle:{color:"#3C525C",width:1}},splitLine:{show:!1,lineStyle:{color:["red"]}}},yAxis:{name:"数量",type:"value",axisLabel:{show:!0,textStyle:{color:"#f2f2f2",fontSize:"12"}},splitLine:{show:!1,lineStyle:{color:["red"]}},axisLine:{show:!0,lineStyle:{color:"#3C525C",width:1}}},series:[{name:"安装数量",type:"bar",barWidth:"12",data:[4,5,6],lineStyle:{normal:{color:"#fbec40",width:2}},itemStyle:{normal:{barBorderRadius:[10,10,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#01d1a1"},{offset:.5,color:"#01acbe"},{offset:1,color:"#01acbe"}]),opacity:.85}}}]};e.setOption(t)},drawInstallInfo:function(){var e=this.$echarts.init(document.getElementById("installInfo")),t={title:{text:"安装信息",x:"left",textStyle:{color:"#f2f2f2",fontStyle:"",fontSize:16}},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{orient:"vertical",right:0,top:60,bottom:20,data:["今日","本周","本月"],textStyle:{color:"#f2f2f2",fontStyle:"",fontSize:16}},series:[{name:"访问来源",type:"pie",radius:"70%",center:["40%","60%"],avoidLabelOverlap:!1,label:{normal:{formatter:"{d}%",show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},data:[{value:[1,2,3],name:"今日",itemStyle:{color:"#eaac35"}},{value:[1,2,3],name:"本周",itemStyle:{color:"#276c9b"}},{value:[1,2,3],name:"本月",itemStyle:{color:"#01d1a1"}}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(t)},getreporttypelist:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var i,n,c,s,r,o,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={cid:t,pids:a},e.prev=1,this.showLoadingDiolod=!0,e.next=5,Object(l["g"])(i);case 5:for(n=e.sent,c=n.data,this.cid=t,this.reporttype=c.types,s=[],r=0;r<this.equipmentlist.length;r++)for(o=0;o<this.reporttype.length;o++)this.equipmentlist[r].code==this.reporttype[o]&&s.push(this.equipmentlist[r]);for(this.equipmentlistz=s,this.device_type="",d=0;d<this.equipmentlistz.length;d++)this.equipmentlistz[d].checked&&(this.device_type=this.device_type+this.equipmentlistz[d].code+",");this.showLoadingDiolod=!1,this.generate(),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),this.showLoadingDiolod=!1,h["a"].error("查询失败",h["a"].findErrorMsg(e.t0));case 22:case"end":return e.stop()}},e,this,[[1,18]])}));function t(t,a){return e.apply(this,arguments)}return t}(),getagentlist:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["a"])(t);case 3:if(a=e.sent,i=a.data,"province"!=i.level){e.next=12;break}if(0!==i.companys_list.length){e.next=8;break}return e.abrupt("return");case 8:for(this.provinceagentlist=i.companys_list,n=0;n<this.provinceagentlist.length;n++)"CH"==this.provinceagentlist[n].type_level&&this.provinceagentlist.splice(n,1);e.next=27;break;case 12:if("city"!=i.level){e.next=19;break}if(0!==i.companys_list.length){e.next=15;break}return e.abrupt("return");case 15:for(this.cityagentlist=i.companys_list,c=0;c<this.cityagentlist.length;c++)"CH"==this.cityagentlist[c].type_level&&this.cityagentlist.splice(c,1);e.next=27;break;case 19:if("county"!=i.level){e.next=26;break}if(0!==i.companys_list.length){e.next=22;break}return e.abrupt("return");case 22:for(this.countyagentlist=i.companys_list,s=0;s<this.countyagentlist.length;s++)"CH"==this.countyagentlist[s].type_level&&this.countyagentlist.splice(s,1);e.next=27;break;case 26:i.level;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](0),h["a"].error("查询失败",h["a"].findErrorMsg(e.t0));case 32:case"end":return e.stop()}},e,this,[[0,29]])}));function t(t){return e.apply(this,arguments)}return t}(),getplaceslist:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["d"])(t);case 3:a=e.sent,i=a.data,this.placeslist=i,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),h["a"].error("查询失败",h["a"].findErrorMsg(e.t0));case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}(),deleteChecked:function(e){e.checked=!e.checked,this.equipmentlistz},choseequipment:function(){this.showequipment=!this.showequipment},changecheck:function(e){e.checked=!e.checked},getreporttypelistall:function(){this.getreporttypelist(this.cid,this.pids)},allchangechecked:function(){for(var e=0;e<this.equipmentlistz.length;e++)this.equipmentlistz[e].checked=!0;this.allchecked=!0,this.dischecked=!1},dischangechecked:function(){for(var e=0;e<this.equipmentlistz.length;e++)this.equipmentlistz[e].checked=!1;this.dischecked=!0,this.allchecked=!1},allcancel:function(){this.showequipment=!this.showequipment}}},p=u,m=(a("cb56"),a("2877")),f=Object(m["a"])(p,i,n,!1,null,null,null);t["default"]=f.exports},"5df3":function(e,t,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=i(t,a),this._i+=e.length,{value:e,done:!1})})},"6f2f":function(e,t,a){"use strict";var i=a("de14"),n=a.n(i);n.a},"84c0":function(e,t,a){},b3aa:function(e,t,a){"use strict";a.d(t,"g",function(){return c}),a.d(t,"a",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return r}),a.d(t,"f",function(){return o}),a.d(t,"b",function(){return d}),a.d(t,"e",function(){return h});var i=a("8897"),n=a("751a");function c(e){return n["a"].get("".concat(i["a"].baseUrl,"/v2/devices/type/report"),e)}function s(e){return n["a"].get("".concat(i["a"].baseUrl,"/v2/company/").concat(e,"/agent"))}function l(e){return n["a"].get("".concat(i["a"].baseUrl,"/v2/company/").concat(e,"/places"))}function r(e){return n["a"].get("".concat(i["a"].baseUrl,"/v3/places/all"),e)}function o(e){return n["a"].get("".concat(i["a"].baseUrl,"/v2/devices/report"),e)}function d(e){return n["a"].get("".concat(i["a"].baseUrl,"/v2/devices/type/count"),e)}function h(e){return n["a"].get("".concat(i["a"].baseUrl,"/v2/devices/report/install"),e)}},c428:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})])}],c={name:"Loading",data:function(){return{}}},s=c,l=(a("6f2f"),a("2877")),r=Object(l["a"])(s,i,n,!1,null,"90b08894",null);t["a"]=r.exports},cb56:function(e,t,a){"use strict";var i=a("e728"),n=a.n(i);n.a},dab0:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"titleHeader"},[a("h3",[e._v(e._s(e.title))])])},n=[],c={name:"TitleHeader",props:["title"],data:function(){return{}}},s=c,l=(a("e4fc"),a("2877")),r=Object(l["a"])(s,i,n,!1,null,"2b873fd4",null);t["a"]=r.exports},de14:function(e,t,a){},e4fc:function(e,t,a){"use strict";var i=a("84c0"),n=a.n(i);n.a},e728:function(e,t,a){}}]);
//# sourceMappingURL=chunk-21592ac6.e9d123b6.js.map